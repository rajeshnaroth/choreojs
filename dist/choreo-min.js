!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Choreo=r():n.Choreo=r()}(this,function(){return function(n){function r(e){if(t[e])return t[e].exports;var o=t[e]={exports:{},id:e,loaded:!1};return n[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=n,r.c=t,r.p="",r(0)}([function(n,r,t){"use strict";function e(n){if(Array.isArray(n)){for(var r=0,t=Array(n.length);n.length>r;r++)t[r]=n[r];return t}return Array.from(n)}function o(n,r){for(var t=arguments.length,e=Array(t>2?t-2:0),o=2;t>o;o++)e[o-2]=arguments[o];return n.concat(e.reduce(function(n,t){return n.concat(Array.isArray(t)?t.map(function(n){return r(n)}):r(t))},[]))}function i(n,r){var t=0;if("function"!=typeof n)throw Error("action is not a function");return{promise:function(e){return new Promise(function(o,i){t=setTimeout(function(){t=0,o(n.call(void 0,e))},r)})},cancel:function(){t>0&&clearTimeout(t)}}}function c(n){var r=!1;if("function"!=typeof n)throw Error("action is not a function");return{promise:function(t){return new Promise(function(e,o){n(t).then(function(n){return r?o({isCanceled:!0}):e(n)}).catch(function(n){return o(r?{isCanceled:!0}:n)})})},cancel:function(){r=!0}}}Object.defineProperty(r,"__esModule",{value:!0});var u=t(1),a={create:function(){var n=[],r=!1,t=[];return Object.create({add:function(){for(var r=arguments.length,e=Array(r),c=0;r>c;c++)e[c]=arguments[c];n=o.apply(void 0,[n,function(n){return i(n,1)}].concat(e)),t.push({isPromise:!1,sequence:e})},addPromise:function(){for(var r=arguments.length,e=Array(r),i=0;r>i;i++)e[i]=arguments[i];n=o.apply(void 0,[n,function(n){return c(n)}].concat(e)),t.push({isPromise:!0,sequence:e})},wait:function(r){if(0>=r)throw Error("wait time must be greater than zero.");n.push(i(function(n){return n},r))},popLast:function(){n.pop()},cancel:function(){n.forEach(function(n){return n.cancel()})},start:function(t){!r&&n.length>0&&(u.pipeP.apply(void 0,e(n.map(function(n){return n.promise})))(t||""),r=!0)}})},cancellableTimeout:i,cancellablePromise:c};r.default=a},function(n,r){"use strict";function t(n,r){var t=this;return function(){for(var e=arguments.length,o=Array(e),i=0;e>i;i++)o[i]=arguments[i];return n.call.apply(n,[t].concat(o)).then(function(n){return r.call(t,n)})}}Object.defineProperty(r,"__esModule",{value:!0});r.pipeP=function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];if(1>r.length)throw Error("you must provide at least one promise to pipe");var o=r[0],i=r.slice(1,1/0);return i.reduce(t,o)}}])});